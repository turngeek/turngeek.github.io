<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ --> 
<!--[if lt IE 7 ]> <html lang="en-US" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en-US" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en-US" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en-US" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en-US" class="no-js"> <!--<![endif]-->
<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js">
      </script>
    <![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta itemprop='author' content='Marcus Schiesser and Martin Schmollinger' id='author'>
<meta itemprop='copyrightHolder' content='dpunkt.verlag GmbH. Authorized translation of the German edition titled "Workshop Java EE 7. Ein praktischer Einstieg in die Java Enterprise Edition mit dem Web Profile", 2nd edition. ISBN 978-3-86490-195-9' id='copyrightHolder'>
<meta itemprop='copyrightYear' content='2015' id='copyrightYear'>
<meta itemprop='datePublished' content='2015-10-13' id='datePublished'>
<meta itemprop='description' content='This Cloud Tutorial is the first of an upcoming series building a web application step by step with Java EE technology. It will see us implement the user interface of the sample application using JavaServer Faces (JSF).' id='description'>
<meta itemprop='image' content='http://www.turngeek.press/jsfinaday/wp-content/uploads/sites/5/2015/10/jsfinaday_cover.png' id='image'>
<meta itemprop='inLanguage' content='en' id='inLanguage'>
<meta itemprop='publisher' content='TurnGeek' id='publisher'>
<link rel="shortcut icon" href="http://www.turngeek.press/jsfinaday/wp-content/plugins/pressbooks/themes-book/pressbooks-custom-css/favicon.ico" />
<title>9 New Functionalities in JSF 2.2 | Cloud Tutorial &#8211; JavaServer Faces in a Day</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://www.turngeek.press/jsfinaday/xmlrpc.php" />

		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.turngeek.press\/jsfinaday\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56806,55356,56826),0,0),c.toDataURL().length>3e3):("simple"===a?d.fillText(String.fromCharCode(55357,56835),0,0):d.fillText(String.fromCharCode(55356,57135),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='pressbooks-book-css'  href='http://www.turngeek.press/jsfinaday/wp-content/plugins/pressbooks/themes-book/pressbooks-book/style.css' type='text/css' media='screen, print' />
<link rel='stylesheet' id='pressbooks-custom-css-css'  href='http://www.turngeek.press/jsfinaday/wp-content/uploads/sites/5/custom-css/web.css?ver=1441720892' type='text/css' media='screen' />
<script type='text/javascript' src='http://www.turngeek.press/jsfinaday/wp-includes/js/jquery/jquery.js?ver=1.11.3'></script>
<script type='text/javascript' src='http://www.turngeek.press/jsfinaday/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://www.turngeek.press/jsfinaday/wp-content/plugins/pressbooks/themes-book/pressbooks-book/js/script.js?ver=1.0'></script>
<script type='text/javascript' src='http://www.turngeek.press/jsfinaday/wp-content/plugins/pressbooks/themes-book/pressbooks-book/js/pop-out.js?ver=1.0'></script>
<link rel='https://api.w.org/' href='http://www.turngeek.press/jsfinaday/wp-json/' />
<link rel='prev' title='8 Implementation of the Remaining Use Cases' href='http://www.turngeek.press/jsfinaday/chapter/8-implementation-of-the-remaining-use-cases/' />
<link rel='next' title='10 A Brief Venture into PrimeFaces' href='http://www.turngeek.press/jsfinaday/chapter/10-a-brief-venture-into-primefaces/' />
<meta name="generator" content="WordPress 4.4" />
<link rel='shortlink' href='http://www.turngeek.press/jsfinaday/?p=34' />
<link rel="alternate" type="application/json+oembed" href="http://www.turngeek.press/jsfinaday/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.turngeek.press%2Fjsfinaday%2Fchapter%2F9-new-functionalities-in-java-ee-7%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://www.turngeek.press/jsfinaday/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.turngeek.press%2Fjsfinaday%2Fchapter%2F9-new-functionalities-in-java-ee-7%2F&#038;format=xml" />
<style type="text/css">
/* <![CDATA[ */
img.latex { vertical-align: middle; border: none; background: none; }
/* ]]> */
</style>

</head>
<body class="single single-chapter postid-34" id="9newfunctionalitiesinjsf2.2">
	<!-- Faccebook share js sdk -->
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	  if (d.getElementById(id)) return;
	  js = d.createElement(s); js.id = id;
	  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
	  fjs.parentNode.insertBefore(js, fjs);
	}(document, "script", "facebook-jssdk"));</script>

<!-- a11y toolbar -->
<div class="a11y-toolbar">
	</div>
<!-- // a11y toolbar -->


	   	 
		<span itemscope itemtype="http://schema.org/WebPage" itemref="about copyrightHolder copyrightYear inLanguage publisher">		
		<div class="nav-container">
				<nav>
			
			 		<!-- Book Title -->
				    <h1 class="book-title"><a href="http://www.turngeek.press/jsfinaday/" title="Cloud Tutorial &#8211; JavaServer Faces in a Day" rel="home">Cloud Tutorial &#8211; JavaServer Faces in a Day</a></h1>
			    
			   
			    
					    <div class="sub-nav-left">
							<!-- Logo -->
							<h2 class="pressbooks-logo"><a href="http://www.turngeek.press/">TurnGeek Books</a></h2>
					    </div> <!-- end .sub-nav-left -->
			    
			    <div class="sub-nav-right">
			    
					    	
						
						<!-- --> 
				
				</div> <!-- end .sub-nav-right -->
			</nav>
			      
			  <div class="sub-nav">       
			     <!-- Author Name -->   
			    <div class="author-wrap"> 
			    									     	<h3>Marcus Schiesser and Martin Schmollinger</h3>
		     					     </div> <!-- end .author-name -->
		     
			  </div><!-- end sub-nav -->  
			    
				 
		</div> <!-- end .nav-container -->

	<div class="wrapper"><!-- for sitting footer at the bottom of the page -->	    
			<div id="wrap">	    
				<div id="content">

	 	
							<h2 class="entry-title">9 New Functionalities in JSF 2.2</h2>
					<div class="nav">
  	<span class="previous"><a href="http://www.turngeek.press/jsfinaday/chapter/8-implementation-of-the-remaining-use-cases/">Previous</a></span>
  <!-- 	<h2 class="entry-title">9 New Functionalities in JSF 2.2</h2> -->
  	<span class="next"><a href="http://www.turngeek.press/jsfinaday/chapter/10-a-brief-venture-into-primefaces/">Next</a></span>
    </div>				<div id="post-34" class="type-1 post-34 chapter type-chapter status-publish hentry">
					
					<div class="entry-content">
					  				    									
					<p>The attentive reader will likely have noticed that that we have not taken advantage of all the new capabilities of JSF 2.2 (<code><a href="http://jcp.org/en/jsr/detail?id=344" target="_blank">http://jcp.org/en/jsr/detail?id=344</a></code>) in our code. The reason for this is that the requirements of the application can be fulfilled without these enhancements. Although JSF 2.2 was a minor release, it did incorporate many improvements into the Standard. The most important changes were referred to as <em>Big Ticket Features</em>. We have already used a couple of them – namely <em>Resource Library Contracts</em> and HTML5 support. This section will outline two of the other major improvements. Though we haven’t used them in our application, these developments are still interesting to know about.</p>
<h3>9.1 Faces Flows</h3>
<p>We often encounter the concept of the user being guided through a series of pages by a web application for the purpose of fulfilling a task. Page flows of this kind can be found in Wizards, multi-page questionnaires or booking processes. In such cases, the amount and complexity of data to be entered is usually too great for the application to request that the user enters it all on one page. Additionally, the page flow enhances the intelligibility and user acceptance of the application, which in turn leads to a lower error rate and a higher number of users. Up until JSF 2.2, the implementation of such a page flow was not explicitly supported.</p>
<p>With <em>Faces Flows</em>, JSF 2.2 provides a mechanism with which a page flow can be defined as a reusable module for JSF applications. Each page flow is defined by a number of <em>flow nodes</em> and by a <em>flow definition</em> that determines how the <em>flow nodes</em> will be executed when the page flow is run. Here, too, the principle of <em>convention over configuration</em> is adhered to, which enables the creation of a page flow even without explicit configuration. Should a configuration be necessary, it can be accomplished in two ways. The first option is to use the <em>FlowBuilder API</em> to define the page flow programmatically in a class containing the <code>@FlowDefinition</code> annotation from the <code>javax.faces.flow</code> package. Alternatively, the page flow can be established in a configuration file of the name <code>&lt;flow-name&gt;-flow.xml</code>, whereby <em>flow-name</em> represents the unique name of the page flow in the web application.</p>
<p>The <em>flow nodes</em> can be Facelets, method calls, branches in the navigations, calls to other page flows or a return to the calling page flow. When calling a page flow from another page flow, parameters can be passed and returned again when the called page flow has ended.</p>
<p>To enable a bean to assume the role of controller during the page flow, a new scope for CDI beans was introduced. A CDI bean that is annotated with <code>@FlowScoped</code> from the package <code>javax.faces.flow</code> is created at the start of the page flow and destroyed when it has finished. All data stored there are available independently of the <em>flow node</em> for the time that the page flow exists.</p>
<p>Additionally, a new EL object (<code>#{flowScope}</code>) was introduced as a local map in the page flow via which data can be passed from Facelet to Facelet. The map can also be requested via the FacesContext:</p>
<pre class="lang:default decode:true">facesContext.getApplication().getFlowHandler().getCurrentFlowScope()</pre>
<p>All artifacts belonging to a page flow (Facelets, classes, configuration files etc.) are saved in a directory with the name of the page flow (<em>flow-name</em>) and made available either directly in the root directory of the application or as a JAR file in the application’s web archive. This is how the modularization of page flows is achieved.</p>
<h3>9.2 Stateless Views</h3>
<p>When a user interacts with a view, its state is stored in between view accesses. The state of a view includes the state of its components, validators and converters. For example, the state of a component could be the current selection in a checkbox.</p>
<p>The time it takes to answer a request is generally shorter than the time between two consecutive requests in the same session. If we want to retain the view state between two requests in the main memory, this could – in the case of several users doing the same thing – lead to critical load on the server. For this reason, the view state between two requests will be cached and reloaded in the first step of the next request.</p>
<p>The states of the view can be stored either on the server or the client. On the server, the HTTP session of the underlying Servlet is generally used; in contrast, storing the data in the client uses a hidden INPUT element. While storing the state in the client stresses the bandwidth of the communication in both directions, storing it on the server will place demands on the server’s memory.</p>
<p>While the size of the state of a view was once a weak point in JSF, the introduction of <em>partial state saving</em> in JSF 2.0 was successful in optimizing memory requirements. With <em>partial state saving</em>, the implementation did not save the complete component tree in its current state, but only the changes in relation to the initial state. Restoring the state could then be accomplished using the initial state and the stored changes, resulting in significantly reduced memory demands.</p>
<p>JSF 2.2 then introduced stateless views (tag <code>&lt;f:view&gt;</code> with the boolean attribute <code>transient</code>). For stateless views, the view state between two requests was not stored at all, which saved on memory, bandwidth and computer capacity. In addition, stateless views meant that the view state between consecutive requests did not end up being saved for no reason. Following a request to a view, users generally want to continue working with the same state. For this reason, the use of stateless views makes sense only in use cases for which very few or no successive requests to the same view are expected. One example from our application would be the donation list (Facelet <code>listDonations.xhtm</code>l). After the first time it’s accessed, this shows only a table with campaign and a button for exiting the view. We can therefore safely dispense with storing the state of this view.</p>
<h3>Discussion</h3>
<p>Use the message board below to give the authors your feedback or to discuss this page&#8217;s topic with other readers (in English please!). Please don&#8217;t expect the authors to answer directly, but they might update the content of this site according to your feedback.<br />
<script src="http://www.turngeek.press/js/disqus.js" type="text/javascript"></script></p>

					</div><!-- .entry-content -->
				</div><!-- #post-## -->

			
				</div><!-- #content -->
			
				<!-- Share buttons -->
	<div class="share-wrap-single">
		<ul class="share share-single">
						<li class="email"><a href="mailto:?subject=I%20wanted%20to%20share%20this%20post%20with%20you%20from%20Cloud%20Tutorial%20-%20JavaServer%20Faces%20in%20a%20Day&amp;body=9%20New%20Functionalities%20in%20JSF%202.2%20-%20http%3A%2F%2Fwww.turngeek.press%2Fjsfinaday%2Fchapter%2F9-new-functionalities-in-java-ee-7%2F" title="Email to a friend" target="_blank">Share via Email</a>
			</li>
			<li class="twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-width="97px">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></li>
			<li class="facebook"><div class="fb-like" data-send="false" data-layout="button_count" data-width="60" data-show-faces="false"></div></li>
									
		</ul>
	</div><!-- end .share-wrap-single --> 
			
				
		
	<div id="sidebar">

		<ul id="booknav">
		<!-- If Logged in show ADMIN -->
								
				<li class="home-btn"><a href="http://www.turngeek.press/jsfinaday">Home</a></li>

		<!-- TOC button always there -->
				<li class="toc-btn"><a href="http://www.turngeek.press/jsfinaday/table-of-contents">Table of Contents</a></li>
			</ul>

		<!-- Pop out TOC only on READ pages -->
						<div id="toc">
			<a href="#" class="close">Close</a>
			<ul>
				<li><h4><!-- Front-matter --></h4></li>
				<li>
					<ul>
																		<li class="front-matter introduction"><a href="http://www.turngeek.press/jsfinaday/front-matter/introduction-2/">Introduction</a>
              						</li>
											</ul>
				</li>
								<li><h4>								Chapters								</h4></li>
				<li>
					<ul>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/1-outlook/">1 Outlook</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/2-project-setup/">2 Project Setup</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/3-domain-classes-as-javabeans/">3 Domain Classes as JavaBeans</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/4-internationalization/">4 Internationalization</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/5-the-templating-system/">5 The Templating System</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/6-our-first-use-case-display-and-edit-campaign/">6 Our First Use Case: "Display and Edit Campaign"</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/7-additional-jsf-and-java-ee-technologies/">7 Additional JSF and Java EE Technologies</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/8-implementation-of-the-remaining-use-cases/">8 Implementation of the Remaining Use Cases</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/9-new-functionalities-in-java-ee-7/">9 New Functionalities in JSF 2.2</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/10-a-brief-venture-into-primefaces/">10 A Brief Venture into PrimeFaces</a>
                							</li>
																				<li class="chapter type-1"><a href="http://www.turngeek.press/jsfinaday/chapter/11-exercises/">11 Exercises</a>
                							</li>
											</ul>
				</li>
								<li><h4><!-- Back-matter --></h4></li>
				<li>
					<ul>
																		<li class="back-matter conclusion"><a href="http://www.turngeek.press/jsfinaday/back-matter/what-next/">What Next?</a>
              						</li>
											</ul>
				</li>
			</ul>
		</div><!-- end #toc -->
		

	</div><!-- end #sidebar -->
	
	</div><!-- #wrap -->
	<div class="push"></div>
	
	</div><!-- .wrapper for sitting footer at the bottom of the page -->


<div class="footer">
	<div class="inner">
								
			
						<p class="cie-name"><a href="http://pressbooks.com">Pressbooks.com: Simple Book Production</a></p>
	</div><!-- #inner -->
</div><!-- #footer -->
</span><!-- schema.org -->
<script type='text/javascript' src='http://www.turngeek.press/jsfinaday/wp-content/plugins/pressbooks/themes-book/pressbooks-book/js/keyboard-nav.js?ver=20130306'></script>
<script type='text/javascript' src='http://www.turngeek.press/jsfinaday/wp-includes/js/wp-embed.min.js?ver=4.4'></script>
</body>
</html>
