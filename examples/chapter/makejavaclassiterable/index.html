<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ --> 
<!--[if lt IE 7 ]> <html lang="en-US" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en-US" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en-US" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en-US" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en-US" class="no-js"> <!--<![endif]-->
<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js">
      </script>
    <![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta itemprop='alternativeHeadline' content='Turn Geek: Learning by Example' id='alternativeHeadline'>
<meta itemprop='author' content='TurnGeek' id='author'>
<meta itemprop='copyrightHolder' content='TurnGeek' id='copyrightHolder'>
<meta itemprop='copyrightYear' content='2016' id='copyrightYear'>
<meta itemprop='image' content='/examples/wp-content/plugins/pressbooks/assets/images/default-book-cover.jpg' id='image'>
<meta itemprop='inLanguage' content='en' id='inLanguage'>
<link rel="shortcut icon" href="/examples/wp-content/plugins/pressbooks/themes-book/pressbooks-custom-css/favicon.ico" />
<title>How to make a Java class iterable? | Neat Little Programming Examples</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="/examples/xmlrpc.php" />

		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.turngeek.press\/examples\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56806,55356,56826),0,0),c.toDataURL().length>3e3):("simple"===a?d.fillText(String.fromCharCode(55357,56835),0,0):d.fillText(String.fromCharCode(55356,57135),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='pressbooks-book-css'  href='/examples/wp-content/plugins/pressbooks/themes-book/pressbooks-book/style.css' type='text/css' media='screen, print' />
<link rel='stylesheet' id='pressbooks-custom-css-css'  href='/examples/wp-content/plugins/pressbooks/themes-book/pressbooks-custom-css/style.css?ver=4.4' type='text/css' media='screen' />
<script type='text/javascript' src='/examples/wp-includes/js/jquery/jquery.js?ver=1.11.3'></script>
<script type='text/javascript' src='/examples/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='/examples/wp-content/plugins/pressbooks/themes-book/pressbooks-book/js/script.js?ver=1.0'></script>
<script type='text/javascript' src='/examples/wp-content/plugins/pressbooks/themes-book/pressbooks-book/js/pop-out.js?ver=1.0'></script>
<link rel='https://api.w.org/' href='/examples/wp-json/' />
<meta name="generator" content="WordPress 4.4" />
<link rel='shortlink' href='/examples/?p=5' />
<link rel="alternate" type="application/json+oembed" href="/examples/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.turngeek.press%2Fexamples%2Fchapter%2Fmakejavaclassiterable%2F" />
<link rel="alternate" type="text/xml+oembed" href="/examples/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.turngeek.press%2Fexamples%2Fchapter%2Fmakejavaclassiterable%2F&#038;format=xml" />
<style type="text/css">
/* <![CDATA[ */
img.latex { vertical-align: middle; border: none; background: none; }
/* ]]> */
</style>

</head>
<body class="single single-chapter postid-5" id="howtomakeajavaclassiterable?">
	<!-- Faccebook share js sdk -->
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	  if (d.getElementById(id)) return;
	  js = d.createElement(s); js.id = id;
	  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
	  fjs.parentNode.insertBefore(js, fjs);
	}(document, "script", "facebook-jssdk"));</script>

<!-- a11y toolbar -->
<div class="a11y-toolbar">
	</div>
<!-- // a11y toolbar -->


	   	 
		<span itemscope itemtype="http://schema.org/WebPage" itemref="about copyrightHolder copyrightYear inLanguage publisher">		
		<div class="nav-container">
				<nav>
			
			 		<!-- Book Title -->
				    <h1 class="book-title"><a href="/examples/" title="Neat Little Programming Examples" rel="home">Neat Little Programming Examples</a></h1>
			    
			   
			    
					    <div class="sub-nav-left">
							<!-- Logo -->
							<h2 class="pressbooks-logo"><a href="/">TurnGeek Books</a></h2>
					    </div> <!-- end .sub-nav-left -->
			    
			    <div class="sub-nav-right">
			    
					    	
						
						<!-- --> 
				
				</div> <!-- end .sub-nav-right -->
			</nav>
			      
			  <div class="sub-nav">       
			     <!-- Author Name -->   
			    <div class="author-wrap"> 
			    									     	<h3>TurnGeek</h3>
		     					     </div> <!-- end .author-name -->
		     
			  </div><!-- end sub-nav -->  
			    
				 
		</div> <!-- end .nav-container -->

	<div class="wrapper"><!-- for sitting footer at the bottom of the page -->	    
			<div id="wrap">	    
				<div id="content">

	 	
							<h2 class="entry-title">How to make a Java class iterable?</h2>
					<div class="nav">
  	<span class="previous"><a href="/examples/front-matter/introduction/">Previous</a></span>
  <!-- 	<h2 class="entry-title">How to make a Java class iterable?</h2> -->
    </div>				<div id="post-5" class="type-1 post-5 chapter type-chapter status-publish hentry chapter-type-type-1">
					
					<div class="entry-content">
					  				    									
					<h3>Abstract</h3>
<p>In many situations it is helpful having the ability to iterate over the fields of an object of a Java class. This functionality is not available out-of-the box for a self-provided class. Fortunately, the Java API provides a mechanism for programmers to make their classes iterable by implementing the generic interface <code>java.lang.Iterable&lt;T&gt;</code>. In the following you&#8217;ll find a short example.</p>
<h3>Problem Statement</h3>
<p>In a web application for managing digital identities, we use a class <code>DigitalIdentity</code> (see Listing 1) to store the real name of a person and the related user names of social networks and other online services.</p>
<pre class="lang:java decode:true" title="Listing 1: &lt;code&gt;DigitalIdentity &lt;/code&gt;class">package press.turngeek.examples.java.iterable;

public class DigitalIdentity {
	
   private String name;
   private String email;
   private String skype;
	
   public DigitalIdentity(String name, String email) {
      super();
      this.name = name;
      this.email = email;
   }
   public String getName() {
      return name;
   }
   public void setName(String name) {
      this.name = name;
   }
   public String getEmail() {
      return email;
   }
   public void setEmail(String email) {
      this.email = email;
   }
   public String getSkype() {
      return skype;
   }
   public void setSkype(String skype) {
      this.skype = skype;
   }
}</pre>
<p>Listing 1: <code>DigitalIdentity </code>class</p>
<p>In another part of the software, we have access to a concrete object of the class and want to iterate over its fields using a for loop or the forEach method (see Listing 2).</p>
<pre class="lang:default mark:13 decode:true" title="Listing 2: Main class">package press.turngeek.examples.java.iterable;

public class Main {
   public static void main(String[] args) {
      DigitalIdentity boss = 
            new DigitalIdentity("Mark Zuckerberg", "one@facebook.com");
      boss.setSkype("euro.sugarmountain");
		
      /*... after an arbitrary logic we want to iterate over all attributes
       * in order to print them on the screen. No idea? 
       * -&gt; Compiler says: boss is not Iterable!
       */
      boss.forEach(v -&gt; System.out.println(v));
   }
}</pre>
<p>Listing 2: <code>Main </code>class</p>
<p>Since our class <code>DigitalIdentity </code>is currently not prepared for this operation, the compiler reports the corresponding error (&#8220;The method forEach((&lt;no type&gt; v) -&gt; {}) is undefined for the type <code>DigitalIdentity</code>&#8220;).</p>
<h3>Solution</h3>
<p>The key to the solution is that the class <code>DigitalIdentity </code>needs to implement the interface <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html" target="_blank"><code>java.lang.Iterable&lt;T&gt;</code></a> (click to see Java API doc). We only have to implement the method <code>iterator()</code> to reach our goal. This method must return an instance of a class implementing the interface <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html" target="_blank"><code>java.util.Iterator&lt;E&gt;</code></a> as a part of the <a href="https://en.wikipedia.org/wiki/Iterator_pattern" target="_blank">Iterator pattern</a>. The interface standardizes the use of iterator objects for Java. For our use case, we only have to implement the methods <code>hasNext()</code> and <code>next()</code>. For the other two methods the interface provides default implementations.</p>
<p>Summarized, we have to realize the following steps:</p>
<ul>
<li>The class <code>DigitalIdentity </code>must implement the interface <code>java.lang.Iterable&lt;T&gt;</code>. Besides the update of the class declaration, we must add the new method <code>iterator()</code> to the class.</li>
<li>Best practice for the implementation of the method <code>iterator()</code> is to use an <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html" target="_blank">anonymous inner class</a>, since it is possible to define the class implementing the interface <code>java.util.Iterator&lt;E&gt;</code> and to create an object of this class in the same code construct.</li>
<li>The class implementing the interface <code>java.util.Iterator&lt;E&gt;</code> represents an iteration over our class <code>DigitalIdentity</code>. An instance of that class represents a certain iteration. Hence, we have to find a way to represent the state of an iteration in the class.</li>
</ul>
<pre class="lang:default mark:6,35-58 decode:true" title="Listing 3: Iterable DigitalIdentity class">package press.turngeek.examples.java.iterable;

import java.util.Iterator;
import java.util.NoSuchElementException;

public class DigitalIdentity implements Iterable&lt;String&gt; {
	
   private String name;
   private String email;
   private String skype;
	
   public DigitalIdentity(String name, String email) {
      super();
      this.name = name;
      this.email = email;
   }
   public String getName() {
      return name;
   }
   public void setName(String name) {
      this.name = name;
   }
   public String getEmail() {
      return email;
   }
   public void setEmail(String email) {
      this.email = email;
   }
   public String getSkype() {
      return skype;
   }
   public void setSkype(String skype) {
      this.skype = skype;
   }
   @Override
   public Iterator&lt;String&gt; iterator() {	
      return new Iterator&lt;String&gt;() {		
         int count=0;
         @Override
         public boolean hasNext() {
            return count&lt;3;
         }
         @Override
         public String next() {
            count++;
            switch(count) {					
               case 1:					
                  return name;
               case 2:
                  return email;
               case 3:
                  return skype;
               default:
                  throw new NoSuchElementException();			
            }
         }			
      };
   }
}</pre>
<p>Listing 3: Iterable <code>DigitalIdentity </code>class</p>
<p>In Listing 3, you can see that we use an <code>int </code>variable to represent the state of an iteration (<code>int count</code>). When an instance of the Iterator is created the value of the variable is 0. Each time the method <code>next()</code> is called, the variable is incremented by 1. The current value of the variable helps us to decide which field is returned or to throw an exception if there is nothing left.</p>
<p>After the changes in Listing 2, all classes will compile and the execution of class <code>Main </code>in Listing 2 will produce the following output:</p>
<pre class="toolbar:2 nums:false nums-toggle:false lang:default decode:true">Mark Zuckerberg
one@facebook.com
euro.sugarmountain</pre>
<h3>Discussion</h3>
<p>On the one hand, the solution is very lean, since all coding to provide the new functionality could be made in the class <code>DigitalIdentity</code>. On the other hand, the solution is not very smart with respect to extensions of the class <code>DigitalIdentity</code>. For example, a new field <code>faceBook </code>could be necessary in the near future. In this case, we have to change the implementation of the anonymous Iterator class, too. A smarter solution that automatically includes new fields could be realized using the <a href="https://docs.oracle.com/javase/tutorial/reflect/" target="_blank">Java&#8217;s Reflection API</a>.</p>
<h3>Further Online Resources</h3>
<p><a href="https://www.youtube.com/watch?v=x8NU2JVvb9I" target="_blank">YouTube: Apple Juice Teaching &#8211; Iterator and Iterable</a></p>

					</div><!-- .entry-content -->
				</div><!-- #post-## -->

			
				</div><!-- #content -->
			
				<!-- Share buttons -->
	<div class="share-wrap-single">
		<ul class="share share-single">
						<li class="email"><a href="mailto:?subject=I%20wanted%20to%20share%20this%20post%20with%20you%20from%20Neat%20Little%20Programming%20Examples&amp;body=How%20to%20make%20a%20Java%20class%20iterable%3F%20-%20http%3A%2F%2Fwww.turngeek.press%2Fexamples%2Fchapter%2Fmakejavaclassiterable%2F" title="Email to a friend" target="_blank">Share via Email</a>
			</li>
			<li class="twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-width="97px">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></li>
			<li class="facebook"><div class="fb-like" data-send="false" data-layout="button_count" data-width="60" data-show-faces="false"></div></li>
									
		</ul>
	</div><!-- end .share-wrap-single --> 
			
				
		
	<div id="sidebar">

		<ul id="booknav">
		<!-- If Logged in show ADMIN -->
								
				<li class="home-btn"><a href="/examples">Home</a></li>

		<!-- TOC button always there -->
				<li class="toc-btn"><a href="/examples/table-of-contents">Table of Contents</a></li>
			</ul>

		<!-- Pop out TOC only on READ pages -->
						<div id="toc">
			<a href="#" class="close">Close</a>
			<ul>
				<li><h4><!-- Front-matter --></h4></li>
				<li>
					<ul>
																		<li class="front-matter introduction"><a href="/examples/front-matter/introduction/">Introduction</a>
              						</li>
											</ul>
				</li>
								<li><h4>								Examples								</h4></li>
				<li>
					<ul>
																				<li class="chapter type-1"><a href="/examples/chapter/makejavaclassiterable/">How to make a Java class iterable?</a>
                							</li>
											</ul>
				</li>
								<li><h4><!-- Back-matter --></h4></li>
				<li>
					<ul>
																	</ul>
				</li>
			</ul>
		</div><!-- end #toc -->
		

	</div><!-- end #sidebar -->
	
	</div><!-- #wrap -->
	<div class="push"></div>
	
	</div><!-- .wrapper for sitting footer at the bottom of the page -->


<div class="footer">
	<div class="inner">
								
			
						<p class="cie-name"><a href="http://pressbooks.com">Pressbooks.com: Simple Book Production</a></p>
	</div><!-- #inner -->
</div><!-- #footer -->
</span><!-- schema.org -->
<script type='text/javascript' src='/examples/wp-content/plugins/pressbooks/themes-book/pressbooks-book/js/keyboard-nav.js?ver=20130306'></script>
<script type='text/javascript' src='/examples/wp-includes/js/wp-embed.min.js?ver=4.4'></script>
</body>
</html>
